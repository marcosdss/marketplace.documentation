---
slug: release-20231020
authors: [marcola]
tags: [spike]
---

# Spike - LIONS 221

### Assinatura | Folha de impressão/ operação loja

**1. Introdução**

Desejamos que as informações de Assinatura estejam disponíveis na folha de impressão. Isso inclui 2 momentos de um mesmo pedido, ou seja, no ato da compra e nas demais entregas somente dos produtos de “Assinatura”.

**Descrição Completa:**

https://redeoba.atlassian.net/browse/LIONS-221

**Pedido Teste (1370270616202-01):**

https://obahortifruti.myvtex.com/admin/orders/1370270616202-01

**2. Solução**

Como descrito nas documentações da VTEX, criamos um **Anexo** chamado **vtex.subscription** contendo **três parâmetros**, sendo eles:

1. **vtex.subscription.key.frequency**

Responsável pela frequência do pedido. Opções disponíveis: **1 week**, **2 week (quinzenal)** e **1 month**.

2. **vtex.subscription.key.period**

Responsável pelo periodo de entrega do pedido. Sendo eles: **matutino** e **vespertino**.

3. **vtex.subscription.key.purchaseday**

Responsável pela data de inicio do ciclo. Estamos enviando este campo em branco.

:::info
Se o campo for deixado em branco, a data do ciclo de assinatura será o mesmo dia da semana (se a frequência for semanal) ou o mesmo dia do mês (se a frequência for mensal) do pedido original.
:::

**2.1 Informação e Pedido**

Todas essas informações descritas acima ficam disponíveis no pedido (dentro de cada produto, campo **items**), sendo possível ser recuperadas via API Orders.

[OMS - Orders](https://developers.vtex.com/docs/api-reference/orders-api#get-/api/oms/pvt/orders/-orderId-?endpoint=get-/api/oms/pvt/orders/-orderId-)

```bash
 "attachments": [
    {
        "name": "vtex.subscription",
        "content": {
            "vtex.subscription.key.frequency": "1 week",
            "vtex.subscription.key.period": "vespertino",
            "vtex.subscription.key.purchaseday": ""
        }
    }
]
```

**:memo: Links úteis:**
- [Oque é um anexo](https://help.vtex.com/pt/tutorial/o-que-e-um-anexo--aGICk0RVbqKg6GYmQcWUm) <br/>
- [Como criar um anexo de assinatura](https://help.vtex.com/pt/tutorial/como-criar-um-anexo-de-assinatura--2bUuKyPflA8cOGLv8OvaKK) <br/>
- [Configurando a frequência e a data do ciclo de assinatura](https://help.vtex.com/en/tutorial/how-to-create-a-subscription-attachment--2bUuKyPflA8cOGLv8OvaKK#configuring-the-frequency-and-date-of-the-subscription-cycle)
