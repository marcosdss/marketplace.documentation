---
slug: release-20240417
authors: [gustavo]
tags: [spike]
---

# Spike - LIONS 321

## POC | Landing pages em ambiente VTEX

## 1. Introdução

Desejamos que seja feito um estudo/POC para que as landing pages do Oba estejam dentro de um ambiente da VTEX, ao invés de um ambiente apartado.

## 2. Solução

Resolver este problema é mais simples do que parece. Atualmente, as landing pages são criadas diretamente no repositório
[oba.store](https://github.com/ObaHortifrutiDeveloper/oba.store), para que as landing pages do Oba estejam dentro de um ambiente da VTEX podemos criar uma rota dentro do arquivo
`store\routes.json` chamando o bloco referente à landing page desejada.

**Por exemplo:** Ao criar um novo template, utilizamos o bloco `store.custom` que engloba todo o conteúdo que será mostrado na página.
Abaixo está o exemplo de como o bloco `store.custom` foi utilizado na landing page mais recente de [campanha de selos](https://www.obahortifruti.com.br/colecao-saborear):

```jsonc
{
  "store.custom#stamp-campaign-2": {
    "title": "Pagina de Campanha de Selos - 2",
    "blocks": [
      "responsive-layout.desktop#stamp-campaign-template-2",
      "responsive-layout.phone#stamp-campaign-template-2"
    ]
  }
}
```
:::info
O `store.custom` serve apenas para agrupar o conteúdo da página, enquanto os blocos adicionados definem o conteúdo específico.
No exemplo acima, temos dois blocos: um para desktop e outro para dispositivos móveis, garantindo um layout responsivo e evitando quebras de design.
:::

Agora vamos à parte que interessa, para criar a rota referente à landing page escolhida, basta acessar o arquivo `store\routes.json` e definir a rota da seguinte maneira:

1. Chame o bloco `store.custom` referente a landing page desejada;
2. Adicione dentro de "path" o nome que escolher para essa rota.

```jsonc
  "store.custom#stamp-campaign-2": {
    "path": "/selos-2"
  },
```

Assim, ao acrescentar `/selos-2` à URL do site, já podemos acessar o template da campanha de selos e editá-lo através do site-editor.

Esse processo é aplicável a qualquer template previamente criado no repositório [oba.store](https://github.com/ObaHortifrutiDeveloper/oba.store).

É importante notar que, para criar mais de uma página com o mesmo template, é necessário criar rotas distintas. Para isso, basta criar um arquivo com o nome desejado, definir um
`store.custom` personalizado e adicionar os blocos que estão sendo usados no template em questão, como exemplificado abaixo:

```jsonc
{
  "store.custom#teste-1": {
    "blocks": [
      "responsive-layout.desktop#stamp-campaign-template-2",
      "responsive-layout.phone#stamp-campaign-template-2"
    ]
  }
}
```
:::info
Os blocos adicionados acima são os mesmos utilizados no template de campanha de selo
:::

Assim, torna-se possível criar quantas páginas desejar com o mesmo template.

## 3. Repositório Usado para Testes

Para essa spike foi utilizado o repositório [oba.store](https://github.com/ObaHortifrutiDeveloper/oba.store).
