---
slug: release-20250521
authors: [kaisuki]
tags: [spike]
---

# Spike - LIONS 385

## Scroll e rolagem mobile | Melhoria de scroll e rolagem de elementos nas páginas

## 1. Introdução

Foi solicitado que o scroll (navegação vertical) e rolagem (navegação horizontal), dos elementos dos sites e-commerce e institucional no mobile sejam verificados, para entender o que ocorre para que estes não tenham uma funcionalidade e navegação amigáveis e que seja feita a correção, de acordo com o exemplo do vídeo em anexo na tarefa, onde demonstra o exemplo do site da Amazon.

## 2. Solução

### 2.1 Alteração no Componente "oba.slider-layout"

Uma abordagem comum para resolver esse problema é adicionar uma verificação para determinar se o gesto do usuário é mais horizontal ou vertical antes de mover o slider. Ajustando a sensibilidade para garantir que pequenos movimentos horizontais não acionem o slider.

## 3. Diretrizes para o Desenvolvimento

Primeiro, você pode adicionar um listener de eventos de toque para capturar os movimentos de toque:

```javascript
let startX;
let startY;
let isVerticalScroll;

document.querySelector('.your-slider-class').addEventListener('touchstart', handleTouchStart, false);
document.querySelector('.your-slider-class').addEventListener('touchmove', handleTouchMove, false);

function handleTouchStart(evt) {
  const firstTouch = evt.touches[0];
  startX = firstTouch.clientX;
  startY = firstTouch.clientY;
  isVerticalScroll = undefined; // Reset the scroll direction check
}

function handleTouchMove(evt) {
  if (!startX || !startY) {
    return;
  }

  const xDiff = startX - evt.touches[0].clientX;
  const yDiff = startY - evt.touches[0].clientY;

  if (isVerticalScroll === undefined) {
    isVerticalScroll = Math.abs(yDiff) > Math.abs(xDiff);
  }

  if (isVerticalScroll) {
    // Prevent the slider from reacting to vertical scrolls
    evt.stopPropagation();
  }
}

```

### 3.1 Explicação do código

Este código adiciona um evento de touchstart para capturar o início do toque e um evento de touchmove para detectar a direção do movimento. Se o movimento é mais vertical do que horizontal, o evento de movimentação horizontal é prevenido (evt.stopPropagation()).

Segue link da documentação: https://developer.mozilla.org/en-US/docs/Web/API/Element/touchstart_event

## 4. Observações

:::info
Nos utilizamos o componente nativo da VTEX como base para ser desenvolvida a funcionalidade de agendamendo, segue o link do repositório: https://github.com/ObaHortifrutiDeveloper/oba.slider-layout
:::

<br />

:::warning
Lembre-se de realizar o teste de navegação nos principais dispositivos móveis.
:::

<br />

**:memo: Links úteis:**
- [oba.slider-layout](https://github.com/ObaHortifrutiDeveloper/oba.slider-layout)
- [slider-layout VTEX](https://github.com/vtex-apps/slider-layout)
- [TouchStart Event Mozilla](https://developer.mozilla.org/en-US/docs/Web/API/Element/touchstart_event)
- [TouchStart Event W3Schools](https://www.w3schools.com/jsref/event_touchstart.asp)
