---
slug: techinsights-17-11
title: Tech Insights - 17/11
authors: [marcola]
tags: [tech insights, developer, dev notes]
---

# Devpost - 17/11

## Assinatura | Overview

Ol√°, pessoal! Como est√£o? üòÑ

Esse Tech Insight √© sobre Assinatura, vis√£o geral, andamento, discuss√µes e impeditivos. Vamos analisar por etapas seguindo o fluxo do usu√°rio na loja, sendo:

1. Card de Produtos (vitrines, busca e favoritos);
2. P√°gina de Produto;
3. Mini Cart;
4. Carrinho de Compras;
5. Checkout;
6. My Account;

### Introdu√ß√£o

O sistema de Recorr√™ncia √© um aplicativo desenvolvido pela VTEX para facilitar as vendas recorrentes. Funciona como um agendador autom√°tico, repetindo um pedido na frequ√™ncia desejada pelo cliente da sua loja.

Seu cliente pode indicar a periodicidade que deseja repetir a compra de um determinado produto e o sistema vai refazer o pedido de compra automaticamente a cada per√≠odo agendado, de forma recorrente.

[Como funciona a recorr√™ncia](https://help.vtex.com/pt/tutorial/como-funciona-a-assinatura--frequentlyAskedQuestions_4453)

### Desenvolvimento e Status

_Algumas etapas descritas n√£o foram aprovadas pelo QA devido o impeditivo do Anexo. A se√ß√£o "Conclu√≠do" se refere estritamente a produ√ß√£o geral da funcionalidade faltando ajustes finos (sem considerar as altera√ß√µes do Figma ao longo das discuss√µes) e testes de estresse do QA._

#### 1. Card de Produtos

[LIONS-3](https://redeoba.atlassian.net/browse/LIONS-3)

**Introdu√ß√£o:**

Nesta estapa exibimos uma flag para identifica√ß√£o do produto com recorr√™ncia e um bot√£o para direcionar ao produto.

- **Conclu√≠do:**
Layout e funcionalidades.

- **A fazer:**
Nenhum.

- **Impeditivos:**
Nenhum.

#### 2. P√°gina de Produto

[LIONS-20](https://redeoba.atlassian.net/browse/LIONS-20)

[LIONS-245](https://redeoba.atlassian.net/browse/LIONS-254)

**Introdu√ß√£o:**

Estamos integrando um componente de Assinatura na **P√°gina de Produto** para permitir aos usu√°rios escolherem facilmente a frequ√™ncia e quantidade desejadas de um produto.

Ao acessar a PDP, os clientes ter√£o acesso ao bot√£o **Assinatura** e **D√∫vidas Frequentes**, proporcionando op√ß√µes claras e um modal para selecionar a frequ√™ncia de entrega.

Ap√≥s a escolha da quantidade, o produto ser√° adicionado ao carrinho, mantendo a sele√ß√£o de frequ√™ncia. O processo segue o layout proposto, oferecendo uma experi√™ncia fluida ao cliente.

- **Conclu√≠do:**
Layout e funcionalidades.

- **A fazer:**
Duplicidade de produtos e Anexo.

- **Impeditivos:**
Inser√ß√£o de anexo ao produto. Ticket (#926907) aberto junto a VTEX.

#### 3. Mini Cart

[LIONS-158](https://redeoba.atlassian.net/browse/LIONS-158)

[LIONS-255](https://redeoba.atlassian.net/browse/LIONS-255)

**Introdu√ß√£o:**

Disponibilizamos a op√ß√£o para remover a recorr√™ncia dos produtos listados no Mini Cart.

- **Conclu√≠do:**
Layout e funcionalidades.

- **A fazer:**
Investigar instabilidade na remo√ß√£o do anexo.

- **Impeditivos:**
Remo√ß√£o do anexo do produto. Ticket (#926907) aberto junto a VTEX.

#### 4. Carrinho de Compras

[LIONS-231](https://redeoba.atlassian.net/browse/LIONS-231)

**Introdu√ß√£o:**

Disponibilizamos um seletor para trocar a frequ√™ncia da recorr√™ncia dos produtos e a remo√ß√£o do mesmo.

- **Conclu√≠do:**
Layout e funcionalidades.

- **A fazer:**
Nenhum.

- **Impeditivos:**
Troca e remo√ß√£o do anexo do produto. Ticket (#926907) aberto junto a VTEX.

#### 5. Checkout

[LIONS-174](https://redeoba.atlassian.net/browse/LIONS-174)

**Introdu√ß√£o:**

Exibimos duas mensagens informativas no Checkout, sobre a modadalidade de entrega na etapa de Endere√ßo e outra sobre cart√£o virtual na etapa de Pagamento.
Al√©m disso, travamos o prosseguimento da compra caso o usu√°rio n√£o esteja de acordo com os crit√©rios de aceite para a Assinatura.

- **Conclu√≠do:**
Layout e funcionalidades.

- **A fazer:**
Nenhum.

- **Impeditivos:**
N√£o √© poss√≠vel adicionar um produto com recorrente no Checkout para seguir com as valida√ß√µes. Ticket (#926907) aberto junto a VTEX.

#### 5. My Account

[LIONS-264](https://redeoba.atlassian.net/browse/LIONS-264)

**Introdu√ß√£o:**

Nesta etapa, decidimos seguir com o modelo nativo da VTEX. No My Account o usu√°rio consegue visualizar todo os detalhes da suas compras recorrentes e modifica-las.

[Como o cliente da sua loja visualiza a Recorr√™ncia](https://help.vtex.com/pt/tutorial/como-funciona-a-assinatura--frequentlyAskedQuestions_4453#como-o-cliente-da-sua-loja-visualiza-suas-assinaturas)

- **Conclu√≠do:**
N√£o iniciado.

- **A fazer:**
Ocultar algumas op√ß√µes do ambiente nativo. Em conversa com o time.

- **Impeditivos:**
Nenhum.

### Pontos de Aten√ß√£o

#### 1. Duplicidade [EM ESTUDO]

[Known Issue](https://help.vtex.com/known-issues/products-in-the-productlist-that-have-an-itemattachment-duplicate-when-the-quantity-is-increased--2rKPKD21uXZ8iSIq8wNiVf)

Se uma loja usa o componente product-list do Store Framework, usado no minicart, itens do carrinho podem ser duplicados quando se aumenta a quantidade de um item que tenha anexo (itemAttachment).

Essa duplicidade ocorre a cada altera√ß√£o na quantidade dos produtos. Uma poss√≠vel solu√ß√£o em estudo seria remover o produto totalmente do orderForm e adiciona-lo novamente, como descrito:

[SPIKE](https://documentation-obahortifruti.vercel.app/spikes/release-20231113)

#### 2. Adicionar o mesmo produto com e sem recorr√™ncia [RESOLVIDO]

Em testes encontramos alguns impeditivos da plataforma neste cen√°rio. Foi proposto seguir a adi√ß√£o do produto ao carrinho separamente. Produto avulso ou com recorr√™ncia, n√£o sendo poss√≠vel adicionar os dois simultaneamente.

#### 3. Anexo [RESOLVIDO]

Ao tentar adicionar um anexo ao produto recebemos o retorno **404** da **API Attachments**, com a mensagem:

**CHK0140 - O nome do anexo √© inv√°lido**

Todos os campos e nome do anexo est√£o sendo enviados seguindo a documenta√ß√£o da VTEX e com os respectivos nomes cadastrados no admin.

:::note
Em Ticket com a VTEX o cen√°rio foi analisado e direcionado ao time de produto. Segue em analise.
:::

Temos o hist√≥rico de conversas com a VTEX em e-mail e no Help.

<br/>
<br/>

Qualquer d√∫vida, n√£o hesitem em perguntar. Obrigado pela colabora√ß√£o!

Equipe Lions ü¶Å

**:memo: Links √∫teis:**
- [Como funciona a recorr√™ncia](https://help.vtex.com/pt/tutorial/como-funciona-a-assinatura--frequentlyAskedQuestions_4453#como-o-cliente-da-sua-loja-visualiza-suas-assinaturas)
- [Como configurar recorr√™ncia na sua loja](https://help.vtex.com/pt/tutorial/como-configurar-assinatura-v2--1FA9dfE7vJqxBna9Nft5Sj)
- [Como criar um anexo](https://help.vtex.com/pt/tutorial/como-criar-um-anexo-de-assinatura--2bUuKyPflA8cOGLv8OvaKK?&utm_source=autocomplete)
- [Como funciona a Minha Conta](https://help.vtex.com/pt/tutorial/how-my-account-works--2BQ3GiqhqGJTXsWVuio3Xh)
